@{
    ViewBag.Title = "Super Zapatos";
    List<SuperZapatosWeb.Models.StoreModel> stores = ViewBag.Stores;
    List<SuperZapatosWeb.Models.ArticleModel> articles = ViewBag.Articles;
    
}

<script src="/Scripts/jquery-1.10.2.js" type="text/javascript"></script>      

<div class="jumbotron">
    <h1>Super Zapatos</h1>
    <p class="lead">Welcome to the shoe store Super Zapatos.</p>
</div>

<div class="row">
    <div class="col-md-4">
        <h2>Stores</h2>
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <tr>
                    <th>
                        Name
                    </th>
                    <th>
                        Address
                    </th>
                    <th>Articles</th>
                </tr>

                @foreach (var item in stores)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Address)
                        </td>
                        <td>@Html.ActionLink("See Articles", "ArticlesByStore", new {id = item.Id})</td>
                    </tr>
                }

            </table>
        </div>
        <p>
            @Html.ActionLink("See Details", "Index", "Stores")
        </p>
    </div>
    <div class="col-md-8">
        <h2>Articles</h2>
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <tr>
                    <th>
                        Name
                    </th>
                    <th>
                        Description
                    </th>
                    <th>
                        Price
                    </th>
                    <th>
                        Store
                    </th>
                </tr>

                @foreach (var item in articles)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Price)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Store.Name)
                        </td>
                    </tr>
                }

            </table>
            </div>
            <p>
                @Html.ActionLink("See Details", "Index", "Articles")
            </p>
        </div>

    <div id="stores"></div>
    
</div>

<script type="text/javascript">
    //var hostUrl = "http://localhost:2815";
    //var apiUrl = '/services/test/';

    //$(document).ready(function () {
    //    GetAllStores();
    //});

    //function GetAllStores() {
    //    $.ajax({
    //        url: hostUrl + apiUrl,
    //        type: 'GET',
    //        dataType: 'jsonp',
    //        username: "my_user",
    //        password: "my_password",
    //        xhrFields: {
    //            withCredentials: true
    //        },
    //        crossDomain: true,
    //        success: function (data) {
    //            debugger;
    //            DisplayStoreList(data);
    //        },
    //        error: function (x, y, z) {
    //            debugger;
    //            alert("error");
    //        }
    //    });
    //}
    //function DisplayStoreList(stores) {
    //    debugger;
    //    $("#stores").empty();
    //    var result = "<table><th>ID</th><th>Name</th><th>Address</th>";
    //    $.each(stores, function (index, store) {
    //        result += "<tr><td>" + store.Id + "</td><td> " + store.Name + "</td><td>"
    //            + store.Address + "</td></tr>";
    //    });
    //    result += "</table>";
    //    $("#stores").html(result);
    //}


</script>